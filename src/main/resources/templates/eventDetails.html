<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Event Details</title>
    <link rel="stylesheet" type="text/css" href="/css/eventDetails.css">
</head>
<body>
<div class="container">
    <h1 th:text="${event.name}">Event Name</h1>
    <p><strong>Description:</strong> <span th:text="${event.description}">Event Description</span></p>
    <p><strong>Speakers:</strong> <span th:text="${event.speakers}">Speaker Names</span></p>
    <p><strong>Room:</strong> <span th:text="${event.room.name}">Room Name</span></p>
    <p><strong>Capacity:</strong> <span th:text="${event.room.capacity}">Room Capacity</span></p>
    <p><strong>Date & Time: </strong> <span th:text="${#temporals.format(event.eventDateTime, 'yyyy-MM-dd - HH:mm')}">Event Date</span>
    <p>
    <th:block
            th:if="${#authorization.expression('isAuthenticated()') and !#authorization.expression('hasRole(''ADMIN'')')}">
        <!-- If event is already a favourite -->
        <form th:if="${isFavourite}" th:action="@{/favourites/remove}" method="post">
            <input type="hidden" name="eventId" th:value="${event.id}"/>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit">Remove Favourite</button>
        </form>

        <!-- If event is not a favourite and user hasn't reached max -->
        <form th:if="${!isFavourite and !maxFavouritesReached}" th:action="@{/favourites/add}" method="post">
            <input type="hidden" name="eventId" th:value="${event.id}"/>
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit">Add Favourite</button>
        </form>

        <!-- If user reached max favourites -->
        <button th:if="${!isFavourite and maxFavouritesReached}" disabled>Max 5 favourites</button>


    </th:block>

        <a th:href="@{/events}">Back to Events</a>
</div>
</body>
</html>